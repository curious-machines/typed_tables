{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "TTQ",
  "scopeName": "source.ttq",
  "patterns": [
    { "include": "#comment" },
    { "include": "#string" },
    { "include": "#regex" },
    { "include": "#variable" },
    { "include": "#number" },
    { "include": "#tag-expression" },
    { "include": "#enum-dot-access" },
    { "include": "#shorthand-enum" },
    { "include": "#type-keywords" },
    { "include": "#format-keywords" },
    { "include": "#command-keywords" },
    { "include": "#control-keywords" },
    { "include": "#constant" },
    { "include": "#builtin-types" },
    { "include": "#aggregate-functions" },
    { "include": "#operator" },
    { "include": "#type-name" },
    { "include": "#punctuation" }
  ],
  "repository": {
    "comment": {
      "match": "--.*$",
      "name": "comment.line.double-dash.ttq"
    },
    "string": {
      "begin": "\"",
      "end": "\"",
      "name": "string.quoted.double.ttq",
      "patterns": [
        {
          "match": "\\\\.",
          "name": "constant.character.escape.ttq"
        }
      ]
    },
    "regex": {
      "begin": "(?<=matches\\s+)/",
      "end": "/",
      "name": "string.regexp.ttq",
      "patterns": [
        {
          "match": "\\\\.",
          "name": "constant.character.escape.ttq"
        }
      ]
    },
    "variable": {
      "match": "\\$[a-zA-Z_][a-zA-Z0-9_]*",
      "name": "variable.other.ttq"
    },
    "number": {
      "patterns": [
        {
          "match": "(?<![a-zA-Z_])0[xX][0-9a-fA-F_]+\\b",
          "name": "constant.numeric.hex.ttq"
        },
        {
          "match": "(?<![a-zA-Z_])-?\\d+\\.\\d+\\b",
          "name": "constant.numeric.float.ttq"
        },
        {
          "match": "(?<![a-zA-Z_.])-?\\d+\\b(?!\\.\\d)",
          "name": "constant.numeric.integer.ttq"
        }
      ]
    },
    "tag-expression": {
      "match": "(?i)\\b(tag)\\s*\\(\\s*([A-Z_][A-Z0-9_]*)\\s*\\)",
      "captures": {
        "1": { "name": "keyword.other.ttq" },
        "2": { "name": "entity.name.tag.ttq" }
      }
    },
    "enum-dot-access": {
      "match": "\\b([A-Z][a-zA-Z0-9_]*)\\s*(\\.)\\s*([a-z_][a-zA-Z0-9_]*)",
      "captures": {
        "1": { "name": "entity.name.type.enum.ttq" },
        "2": { "name": "punctuation.accessor.ttq" },
        "3": { "name": "variable.other.enummember.ttq" }
      }
    },
    "shorthand-enum": {
      "match": "(?<=[=(,\\s])\\s*(\\.)([a-z_][a-zA-Z0-9_]*)",
      "captures": {
        "1": { "name": "punctuation.accessor.ttq" },
        "2": { "name": "variable.other.enummember.ttq" }
      }
    },
    "type-keywords": {
      "match": "(?i)\\b(type|enum|interface|alias)\\b",
      "name": "storage.type.ttq"
    },
    "format-keywords": {
      "match": "(?i)\\b(yaml|json|xml|pretty)\\b",
      "name": "keyword.other.format.ttq"
    },
    "command-keywords": {
      "match": "(?i)\\b(create|delete|update|set|use|drop|dump|compact|archive|restore|execute|import|show|describe|collect|forward|define|scope)\\b",
      "name": "keyword.other.ttq"
    },
    "control-keywords": {
      "match": "(?i)\\b(from|select|where|sort|by|group|offset|limit|and|or|not|as|to|starts|with|matches|temp|types|interfaces|composites|enums|primitives|aliases|references|graph|system)\\b",
      "name": "keyword.control.ttq"
    },
    "constant": {
      "match": "(?i)\\b(null|true|false)\\b",
      "name": "constant.language.ttq"
    },
    "builtin-types": {
      "match": "\\b(bit|character|uint8|int8|uint16|int16|uint32|int32|uint64|int64|uint128|int128|float32|float64|string|path)\\b",
      "name": "support.type.ttq"
    },
    "aggregate-functions": {
      "match": "(?i)\\b(count|average|sum|product|uuid)\\s*(?=\\()",
      "name": "support.function.ttq"
    },
    "operator": {
      "match": "!=|<=|>=|=|<|>|\\*",
      "name": "keyword.operator.ttq"
    },
    "type-name": {
      "match": "\\b[A-Z][a-zA-Z0-9_]*\\b",
      "name": "entity.name.type.ttq"
    },
    "punctuation": {
      "patterns": [
        {
          "match": "[{}]",
          "name": "punctuation.section.braces.ttq"
        },
        {
          "match": "[\\[\\]]",
          "name": "punctuation.section.brackets.ttq"
        },
        {
          "match": "[()]",
          "name": "punctuation.section.parens.ttq"
        },
        {
          "match": ",",
          "name": "punctuation.separator.comma.ttq"
        },
        {
          "match": ":",
          "name": "punctuation.separator.colon.ttq"
        },
        {
          "match": ";",
          "name": "punctuation.separator.semicolon.ttq"
        },
        {
          "match": "!",
          "name": "punctuation.definition.bang.ttq"
        },
        {
          "match": "\\.",
          "name": "punctuation.accessor.dot.ttq"
        }
      ]
    }
  }
}
